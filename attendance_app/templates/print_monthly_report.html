<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Monthly Salary Report</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    @media print {
      @page {
        size: A5 landscape;
        margin: 10mm 12mm;
      }
      body {
        background: #fff;
        color: #000;
      }
      .container {
        max-width: 100%;
        padding: 0;
        margin: 0;
      }
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 12px;
      color: #222;
      background-color: #fff;
      margin: 10px auto;
      max-width: 980px;
    }
    .container {
      padding: 0 12px;
      max-width: 980px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    /* Header styles: flex horizontal layout */
    .report-header {
    border-bottom: 3px solid #0d6efd;
    padding-bottom: 8px;    /* reduced from 12px */
    margin-bottom: 12px;    /* reduced from 15px */
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;              /* reduced from 15px */
  }
    .report-title-small {
    font-weight: 700;
    font-size: 1.1rem;      /* reduced from 1.6rem */
    color: #0d6efd;
    flex: 1 1 200px;
    min-width: 200px;
  }
    .report-month-small {
    font-weight: 600;
    font-size: 0.9rem;      /* reduced from 1.1rem */
    color: #3a3a3a;
    flex: 1 1 150px;
    min-width: 150px;
    text-align: center;
  }
    .employee-info-small {
    flex: 2 1 400px;
    display: flex;
    justify-content: flex-end;
    gap: 20px;              /* reduced from 30px */
    min-width: 300px;
    font-weight: 600;
    font-size: 0.85rem;     /* reduced from 1rem */
    color: #222;
  }
  .employee-info-small div {
    white-space: nowrap;
  }

    /* Tables layout */
    .tables-row {
      display: flex;
      gap: 25px;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .table-container {
      flex: 1;
      min-width: 300px;
    }
    .section-title {
      background-color: #e9f0ff;
      border-left: 6px solid #0d6efd;
      padding: 6px 10px;
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 10px;
      color: #0b5ed7;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      border-radius: 4px;
    }
    table {
      width: 100%;
      font-size: 11.5px;
      border-collapse: collapse;
    }
    th, td {
      padding: 5px 8px;
      border: 1px solid #dee2e6;
      vertical-align: middle;
    }
    th {
      text-align: center;
    }
    td.text-center {
      text-align: center;
    }
    td.text-end {
      text-align: right;
    }
    .fw-bold {
      font-weight: 700 !important;
    }
    .table-success {
      background-color: #d1e7dd !important;
      color: #0f5132;
    }
    footer {
      margin-top: 25px;
      text-align: right;
      font-size: 0.75rem;
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
<script>
  window.onload = function() {
    window.print();
  };
</script>
    <!-- Header -->
    <header class="report-header single-line-header">
  <div>
    <strong>Employee:</strong> {{ user.name }} &nbsp;&nbsp;|&nbsp;&nbsp;
    <strong>Fixed Salary:</strong> {{ "%.2f"|format(user.salary_per_month) }} {{ currency }} &nbsp;&nbsp;|&nbsp;&nbsp;
    <strong>{{ report_month }}</strong>
  </div>
</header>

    <!-- Tables side-by-side -->
    <div class="tables-row">

      <!-- Work Hours Summary -->
      <div class="table-container">
        <div class="section-title">Work Hours Summary</div>
        <table class="table table-bordered table-sm">
          <thead>
            <tr>
              <th></th>
              <th>Total Hours</th>
              <th>Hourly Rate</th>
              <th>Pay</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Regular Hours</td>
              <td class="text-center">{{ "%.2f"|format(regular_hours) }}</td>
              <td class="text-end">{{ "%.2f"|format(hourly_rate) }} {{ currency }}</td>
              <td class="text-end">{{ "%.2f"|format(regular_pay) }} {{ currency }}</td>
            </tr>
            <tr>
              <td>Overtime Hours</td>
              <td class="text-center">{{ "%.2f"|format(overtime_hours) }}</td>
              <td class="text-end">{{ "%.2f"|format(overtime_rate) }} {{ currency }}</td>
              <td class="text-end">{{ "%.2f"|format(overtime_pay) }} {{ currency }}</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Advance Payments & Deductions -->
      <div class="table-container">
        <div class="section-title">Advance Payments &amp; Deductions</div>
        <table class="table table-bordered table-sm">
          <thead>
            <tr>
              <th>Type &amp; Date</th>
              <th class="text-end">Amount ({{ currency }})</th>
            </tr>
          </thead>
          <tbody>
            {% for adv in advance_list %}
            <tr>
              <td>Advance - {{ adv.date.strftime('%d %b %Y') }}</td>
              <td class="text-end">{{ "%.2f"|format(adv.amount) }}</td>
            </tr>
            {% endfor %}
            {% for ded in deduction_list %}
            <tr>
              <td>Deduction - {{ ded.date.strftime('%d %b %Y') }}</td>
              <td class="text-end">{{ "%.2f"|format(ded.amount) }}</td>
            </tr>
            {% endfor %}
            <tr class="fw-bold">
              <td>Total Advances</td>
              <td class="text-end">{{ "%.2f"|format(advances) }}</td>
            </tr>
            <tr class="fw-bold">
              <td>Total Deductions</td>
              <td class="text-end">{{ "%.2f"|format(deductions) }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <!-- Salary Calculation -->
    <section>
      <div class="section-title">Salary Calculation</div>
      <table class="table table-bordered table-sm">
        <tbody>
          <tr>
            <td>Regular Pay</td>
            <td class="text-end">{{ "%.2f"|format(regular_pay) }} {{ currency }}</td>
          </tr>
          <tr>
            <td>Overtime Pay</td>
            <td class="text-end">{{ "%.2f"|format(overtime_pay) }} {{ currency }}</td>
          </tr>
          <tr>
            <td>Total Salary (Before Deductions)</td>
            <td class="text-end">{{ "%.2f"|format(working_salary) }} {{ currency }}</td>
          </tr>
          <tr>
            <td>Advances</td>
            <td class="text-end">-{{ "%.2f"|format(advances) }} {{ currency }}</td>
          </tr>
          <tr>
            <td>Deductions</td>
            <td class="text-end">-{{ "%.2f"|format(deductions) }} {{ currency }}</td>
          </tr>
          <tr class="fw-bold table-success">
            <td>Net Salary</td>
            <td class="text-end">{{ "%.2f"|format(total_salary) }} {{ currency }}</td>
          </tr>
        </tbody>
      </table>
    </section>

  </div>
</body>
</html>
